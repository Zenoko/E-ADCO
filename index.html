<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Générateur d'Attestation de déplacement</title>

    <!-- Font Icon -->
    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">

    <!-- Main css -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
	
    <div class="main" id="main">
		
		
        <!-- Sign up form -->
        <section class="signup">
            <div class="container">
                <div class="signup-content" id="signup-content">
                    <div class="signup-form">
                        <h2 class="form-title" style="text-align:center">ATTESTATION DE DÉPLACEMENT DÉROGATOIRE</h2>
						<p class="form-descript" style="text-align:center;">En application de l'article 1er du décret du 16 mars 2020 portant réglementation des déplacements dans le cadre de la lutte contre la propagation du virus Covid-19 :</p>
                        <form method="POST" class="register-form" id="register-form">
						<br/><h4>Je soussigné(e)</h4>
                            <div class="form-group">
                                <label for="name">Mme / M.</label>
                                <input type="text" name="name" id="name" placeholder="NOM PRENOM"/>
                            </div>
                            <div class="form-group">
                                <label for="email">Né(e) le  :</label>
                                <input type="email" name="email" id="email" placeholder="Email"/>
                            </div>
                            <div class="form-group">
                                <label for="address">Demeurant  :</label>
                                <input type="text" name="adress" id="adress" placeholder="Adresse complète"/>
                            </div>
							<h4>certifie que mon déplacement est lié au motif suivant (cocher la case) autorisé par l’article 1er du décret du 16 mars 2020 portant réglementation des déplacements dans le cadre de la lutte contre la propagation du virus Covid-19  :</h4>
                            <div class="form-group">
                                <input type="checkbox" name="travail" id="travail" class="agree-term" value="travail" />
                                <label for="travail" class="label-agree-term"><span><span></span></span>déplacements entre le domicile et le lieu d’exercice de l’activité professionnelle, lorsqu’ils sont indispensables à l’exercice d’activités ne pouvant être organisées sous forme de télétravail (sur justificatif permanent) ou déplacements professionnels ne pouvant être différés ;</a></label>
                            </div>
							<div class="form-group">
                                <input type="checkbox" name="achats" id="achats" class="agree-term" value="achats"/>
                                <label for="achats" class="label-agree-term"><span><span></span></span>déplacements pour effectuer des achats de première nécessité dans des établissements autorisés (liste sur gouvernement.fr) ; </a></label>
                            </div>
							<div class="form-group">
                                <input type="checkbox" name="sante" id="sante" class="agree-term" value="sante" />
                                <label for="sante" class="label-agree-term"><span><span></span></span>déplacements pour motif de santé ;</a></label>
                            </div>
							<div class="form-group">
                                <input type="checkbox" name="assistance" id="assistance" class="agree-term" value="assistance" />
                                <label for="assistance" class="label-agree-term"><span><span></span></span>déplacements pour motif familial impérieux, pour l’assistance aux personnes vulnérables ou la garde d’enfants ;</a></label>
                            </div>
							<div class="form-group">
                                <input type="checkbox" name="proximite" id="proximite" class="agree-term" value="proximite"/>
                                <label for="proximite" class="label-agree-term"><span><span></span></span>déplacements brefs, à proximité du domicile, liés à l’activité physique individuelle des personnes, à l’exclusion de toute pratique sportive collective, et aux besoins des animaux de compagnie.</a></label>
                            </div>
							<div class="form-group float-right text-right">
                                Fait à <input type="text" class="classic" name="place" />, le <input type="date" class="classic"  name="date"  />
								<div class="sign">(signature)</div>
								<div id="canvas">
							      <canvas class="roundCorners canvas" id="newSignature" style=""></canvas>
							    </div>
							    <!-- <button type="button" id="sauvegarder_btn" onclick="signatureSave()">Sauvegarder</button> -->
							    <button type="button" id="nettoyer_btn" onclick="signatureClear()">Nettoyer</button>
							    </br></br>
							    <span id="used-sign">Signature</span>
							    </br>
							    <img id="saveSignature" alt="Saved image png"/>
                            </div>
                        </form>	
                    </div>
                </div>
            </div>
        </section>
		
		<div class="fixedbutton">
			<div class="form-group form-button">
				<button onclick="generatePDF()" class="btn btn-primary">Télécharger PDF</button><br/>
				<button onclick="window.location.reload();" id="reset_btn" class="btn btn-primary" >Remise à zéro</button>
			</div>
		</div>
		<p>
			Le code source est disponible sur : <a src="https://github.com/Zenoko/Zenoko.github.io">https://github.com/Zenoko/Zenoko.github.io</a><br/>
			Ce site n'est lié à aucune base de données, aucune donnée n'est collecté.
		</p>

        <!-- Sing in  Form -->
        <!--<section class="sign-in">
            <div class="container">
                <div class="signin-content">
                    <div class="signin-image">
                        <figure><img src="images/signin-image.jpg" alt="sing up image"></figure>
                        <a href="#" class="signup-image-link">Create an account</a>
                    </div>

                    <div class="signin-form">
                        <h2 class="form-title">Sign up</h2>
                        <form method="POST" class="register-form" id="login-form">
                            <div class="form-group">
                                <label for="your_name"><i class="zmdi zmdi-account material-icons-name"></i></label>
                                <input type="text" name="your_name" id="your_name" placeholder="Your Name"/>
                            </div>
                            <div class="form-group">
                                <label for="your_pass"><i class="zmdi zmdi-lock"></i></label>
                                <input type="password" name="your_pass" id="your_pass" placeholder="Password"/>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" name="remember-me" id="remember-me" class="agree-term" />
                                <label for="remember-me" class="label-agree-term"><span><span></span></span>Remember me</label>
                            </div>
                            <div class="form-group form-button">
                                <input type="submit" name="signin" id="signin" class="form-submit" value="Log in"/>
                            </div>
                        </form>
                        <div class="social-login">
                            <span class="social-label">Or login with</span>
                            <ul class="socials">
                                <li><a href="#"><i class="display-flex-center zmdi zmdi-facebook"></i></a></li>
                                <li><a href="#"><i class="display-flex-center zmdi zmdi-twitter"></i></a></li>
                                <li><a href="#"><i class="display-flex-center zmdi zmdi-google"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>-->

    </div>
    <!-- JS -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="js/main.js"></script>
	<script src="dist/html2pdf.bundle.min.js"></script>
    <script>
    	signatureCapture();
		document.getElementById("saveSignature").style.display = 'none';
		document.getElementById("used-sign").style.display = 'none';
		
		// RENDERING
		
		
    function render() {
        canvas.removeEventListener('mousedown', ev_mousedown);
        canvas.style.cssText = "border: none;";

        $("sauvegarder_btn").remove();
        $("nettoyer_btn").remove();
        $("render_btn").remove();

        to_render = ['name', 'email', 'address', 'place', 'date'];
        to_render.forEach(function(el) {
            $(el).insertAdjacentHTML('afterend', $(el).value);
            $(el).remove();
        });


        //window.print();

    }
	
	function generatePDF() {
	  // Choose the element that our invoice is rendered in.
	  var name = document.getElementById("name").value;
	  var checkedValue=null;
	  var checkedValue = document.querySelector('.agree-term:checked').value;
	  var ladate=new Date()
	  var canvas = document.getElementById("newSignature");
	  //canvas.removeEventListener('mousedown', ev_mousedown);
	  canvas.style.cssText = "border: none;";
	  //document.getElementById("sauvegarder_btn").remove();
	  document.getElementById("nettoyer_btn").remove();

	  const element = document.getElementById("signup-content");
	  var opt = {
		  filename:     'attestation_deplacement_'+checkedValue+'_'+name+"_"+ladate.getFullYear()+"_"+(ladate.getMonth()+1)+"_"+ladate.getDate()+'.pdf',
		  image:        { type: 'jpeg', quality: 0.98 },
		  html2canvas:  { scale: 4 }
		};
	  // Choose the element and save the PDF for our user.
	  html2pdf()
		.set(opt)
		.from(element)
		.save();
	}
	</script>

	<!--<script type="text/javascript">

    function $(id) { return document.getElementById(id); }
    var is_safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

    if (is_safari) {
        $('date').value = new Date().toLocaleDateString();
    } else {
        $('date').valueAsDate = new Date();
    }


    // RENDERING

    function render() {
        canvas.removeEventListener('mousedown', ev_mousedown);
        canvas.style.cssText = "border: none;";

        $("clear_btn").remove();
        $("render_btn").remove();

        to_render = ['name', 'born', 'address', 'place', 'date'];
        to_render.forEach(function(el) {
            $(el).insertAdjacentHTML('afterend', $(el).value);
            $(el).remove();
        });

        to_disable = ['choix_a', 'choix_b', 'choix_c', 'choix_d', 'choix_e'];
        to_disable.forEach(function(el) {
            if (!$(el).checked) {
                $(el).remove();
                $('label_' + el).remove();
            }
        });

        window.print();

    }

	</script>-->
</body>
</html>
